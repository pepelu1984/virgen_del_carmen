var _ref,_ref1,_ref2;if((_ref=window.Dropbox)==null){window.Dropbox={}}if((_ref1=Dropbox.baseUrl)==null){Dropbox.baseUrl="https://www.dropbox.com"}if((_ref2=Dropbox.blockBaseUrl)==null){Dropbox.blockBaseUrl="https://dl.dropbox.com"}Dropbox.addListener=function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{c.attachEvent("on"+b,function(d){d.preventDefault=function(){return this.returnValue=false};return a(d)})}};Dropbox.removeListener=function(c,b,a){if(c.removeEventListener){c.removeEventListener(b,a,false)}else{c.detachEvent("on"+b,a)}};Dropbox._chooserUrl=function(i,e){var g,f,a,d,h,c,b;h=encodeURIComponent(window.location.protocol+"//"+window.location.host);g=encodeURIComponent(this.appKey);a=encodeURIComponent(i.linkType||"");c=encodeURIComponent(i._trigger||"js");d=Boolean(i.multiselect);f=encodeURIComponent(i.extensions||"");e=Boolean(e);b=""+this.baseUrl+"/chooser?origin="+h+"&app_key="+g+"&link_type="+a;b+="&trigger="+c+"&multiselect="+d+"&extensions="+f+"&iframe="+e;return b};Dropbox._saverUrl=function(c){var d,a,b;a=encodeURIComponent(window.location.protocol+"//"+window.location.host);d=encodeURIComponent(this.appKey);b=""+this.baseUrl+"/saver?origin="+a+"&app_key="+d;return b};Dropbox._handleMessageEvent=function(a,f,c){var e,b,d;e=JSON.parse(a.data);switch(e.method){case"ready":if(c.files!=null){d=JSON.stringify({method:"files",params:c.files});if(Dropbox._ieframe&&(a.source.opener!=null)){b=Dropbox._ieframe.contentWindow}else{b=a.source}b.postMessage(d,Dropbox.baseUrl)}if(typeof c.ready==="function"){c.ready()}break;case"files_selected":case"files_saved":if(typeof f==="function"){f()}if(typeof c.success==="function"){c.success(e.params)}break;case"progress":if(typeof c.progress==="function"){c.progress(e.params)}break;case"close_dialog":if(typeof f==="function"){f()}if(typeof c.cancel==="function"){c.cancel()}break;case"web_session_error":if(typeof f==="function"){f()}if(typeof c.webSessionFailure==="function"){c.webSessionFailure()}break;case"web_session_unlinked":if(typeof f==="function"){f()}if(typeof c.webSessionUnlinked==="function"){c.webSessionUnlinked()}break;case"resize":if(typeof c.resize==="function"){c.resize(e.params)}break;case"error":if(typeof c.error==="function"){c.error(e.params)}break;case"job_id":if(typeof f==="function"){f()}if(typeof c.job_id==="function"){c.job_id(e.params)}break;case"_debug_log":if(typeof console!=="undefined"&&console!==null){console.log(e.params.msg)}}};Dropbox._createIEFrame=function(){var a;if(navigator.appName==="Microsoft Internet Explorer"){a=document.createElement("iframe");a.setAttribute("id","dropbox_xcomm");a.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html");a.style.display="none";document.getElementsByTagName("body")[0].appendChild(a);Dropbox._ieframe=a}};Dropbox.createChooserWidget=function(a){var b,c=this;b=this._createWidgetElement(this._chooserUrl(a,true));b._handler=function(d){if(d.source===b.contentWindow&&d.origin===c.baseUrl){c._handleMessageEvent(d,null,a)}};this.addListener(window,"message",b._handler);return b};Dropbox.createWidget=Dropbox.createChooserWidget;Dropbox.cleanupWidget=function(a){if(!a._handler){throw"Invalid widget!"}this.removeListener(window,"message",a._handler);delete a._handler};Dropbox.cleanupChooserWidget=Dropbox.cleanupWidget;Dropbox._popupDimensionsString=function(a,b){var d,c;d=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.offsetWidth)-a)/2;c=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.offsetHeight)-b)/2;return"width="+a+",height="+b+",left="+d+",top="+c};var __indexOf=[].indexOf||function(c){for(var b=0,a=this.length;b<a;b++){if(b in this&&this[b]===c){return b}}return -1};Dropbox.init=function(a){this.appKey=a.appKey};Dropbox._createWidgetElement=function(a){var b;b=document.createElement("iframe");b.src=a;b.style.display="block";b.style.backgroundColor="white";b.style.border="none";return b};Dropbox._jsonpCounter=1;Dropbox.saveURL=function(c,a,b){b.files=[{url:c,filename:a}];return Dropbox.save(b)};Dropbox.save=function(b){var d,c,a,e=this;b.job_id=function(g){var f;f=function(){var n,h,k,m,i,j,l;j=""+e.baseUrl+"/dropins/job_status?job="+g+"&app_key="+e.appKey;m=function(p){var o;if(p.status==="COMPLETE"){if(typeof b.success==="function"){b.success()}return}else{if(p.progress!=null){if(typeof b.progress==="function"){b.progress(p.progress/100)}}}if((o=p.status)==="PENDING"||o==="DOWNLOADING"){return setTimeout(f,1500)}};if("withCredentials" in new XMLHttpRequest()){l=new XMLHttpRequest();l.onreadystatechange=function(){if(l.readyState===4){return m(JSON.parse(l.responseText))}};l.open("GET",""+e.baseUrl+"/dropins/job_status?job="+g+"&app_key="+e.appKey,true);return l.send()}else{n="DropboxJsonpCallback"+Dropbox._jsonpCounter++;window[n]=m;k=document.head||document.getElementsByTagName("head")[0]||document.documentElement;i=document.createElement("script");i.src=""+j+"&callback="+n;h=false;i.onload=function(){var o;return(o=i.parentNode)!=null?o.removeChild(i):void 0};return k.appendChild(i)}};return f()};if(!(typeof b.files==="object"&&b.files.length)){throw"Opening the saver failed. The object passed in must have a 'files' property that contains a list of objects.  See documentation.";return}d=this._popupDimensionsString(352,209);a=this._openPopup(this._saverUrl(b),d);c=function(f){var g;if(f.source===a||f.source===((g=Dropbox._ieframe)!=null?g.contentWindow:void 0)){Dropbox._handleMessageEvent(f,(function(){a.close();Dropbox.removeListener(window,"message",c)}),b)}};Dropbox.addListener(window,"message",c)};Dropbox._openPopup=function(b,c){var a;a=window.open(b,"dropbox",""+c+",resizable=yes,location=yes");a.focus();return a};Dropbox.choose=function(i){var d,a,g,f,j,h,b,e,c;if(i==null){throw"You must pass in options"}if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Chooser");return}c=660;f=440;if(i.iframe){e=Dropbox._createWidgetElement(this._chooserUrl(i,true));e.style.width=c+"px";e.style.height=f+"px";h=document.createElement("div");h.style.position="fixed";h.style.left=h.style.right=h.style.top=h.style.bottom="0px";h.style.zIndex="1000";d=document.createElement("div");d.style.position="absolute";d.style.left=d.style.right=d.style.top=d.style.bottom="0px";d.style.backgroundColor="rgb(160, 160, 160)";d.style.opacity="0.2";d.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";j=document.createElement("div");j.style.position="relative";j.style.width=c+"px";j.style.margin="125px auto 0px auto";j.style.border="1px solid #ACACAC";j.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";j.appendChild(e);h.appendChild(d);h.appendChild(j);document.body.appendChild(h);g=function(k){if(k.source===e.contentWindow){Dropbox._handleMessageEvent(k,(function(){document.body.removeChild(h);Dropbox.removeListener(window,"message",g)}),i)}};Dropbox.addListener(window,"message",g)}else{a=this._popupDimensionsString(c,f);b=this._openPopup(this._chooserUrl(i),a);g=function(k){var l;if(k.source===b||k.source===((l=Dropbox._ieframe)!=null?l.contentWindow:void 0)){Dropbox._handleMessageEvent(k,(function(){b.close();Dropbox.removeListener(window,"message",g)}),i)}};Dropbox.addListener(window,"message",g)}};Dropbox.attach=Dropbox.choose;Dropbox.isBrowserSupported=function(){var a;a=Dropbox._isBrowserSupportedCheck();Dropbox.isBrowserSupported=function(){return a};return a};Dropbox._isBrowserSupportedCheck=function(){var d,c,a,b;b=[/Windows Phone/,/BB10;/,/CriOS/];for(c=0,a=b.length;c<a;c++){d=b[c];if(d.test(navigator.userAgent)){return false}}return true};(function(){var a,c,d,b,f,e;f=function(h,g){return"background: "+h+";\nbackground: -moz-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: -webkit-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: linear-gradient(to bottom, "+h+" 0%, "+g+" 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+g+"',GradientType=0);"};b=function(j,i,m){var l,h,g;if(m==null){m={}}if(document.createEvent!=null){l=document.createEvent("Event");l.initEvent(i,true,true);for(h in m){g=m[h];l[h]=g}j.dispatchEvent(l)}};if(!Dropbox.appKey){Dropbox.appKey=myAppKey}c=document.createElement("style");c.type="text/css";d=".dropbox-chooser { width: 152px; height: 25px; cursor: pointer;\n  background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/chooser-button-sprites.png'); }\n\n@media\n(-webkit-min-device-pixel-ratio: 1.5),\n(min-resolution: 144dpi) {\n  .dropbox-chooser {\n    background-image: url('"+Dropbox.baseUrl+'/static/images/widgets/chooser-button-sprites-2x.png\');\n    background-size: 305px auto;\n    -webkit-background-size: 305px auto;\n  }\n  .dropbox-chooser:hover { background-position: 0 -50px; }\n  .dropbox-chooser:active { background-position: 0 -100px; }\n  .dropbox-chooser-used { background-position: 304px 0; }\n  .dropbox-chooser-used:hover { background-position: 304px -50px; }\n  .dropbox-chooser-used:active { background-position: 304px -100px; }\n}\n\n.dropbox-chooser:hover { background-position: 0 -25px; }\n.dropbox-chooser:active { background-position: 0 -50px; }\n.dropbox-chooser-used { background-position: 152px 0; }\n.dropbox-chooser-used:hover { background-position: 152px -25px; }\n.dropbox-chooser-used:active { background-position: 152px -50px; }\n.dropbox-chooser-disabled { opacity: 0.4}\n\n.dropbox-saver {\n  display: inline-block;\n  font-family: "Open Sans", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 700;\n  color: #636363;\n  text-decoration: none;\n  padding: 2px 7px 4px 5px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  '+(f("#fcfcfc","#f5f5f5"))+"\n}\n.dropbox-saver:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  "+(f("#fdfdfd","#f5f5f5"))+"\n}\n.dropbox-saver:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n.dropbox-saver img {\n  width: 15px;\n  height: 14px;\n  border: none;\n  vertical-align: bottom;\n}";if(c.styleSheet){c.styleSheet.cssText=d}else{c.textContent=d}document.getElementsByTagName("head")[0].appendChild(c);a=function(){var j,l,k,i,h,g,m;Dropbox._createIEFrame();if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",a,false)}else{if(document.detachEvent){document.detachEvent("onreadystatechange",a)}}g=document.getElementsByTagName("input");for(l=0,i=g.length;l<i;l++){j=g[l];if(j.getAttribute("type")==="dropbox-chooser"){(function(o){var n;n=document.createElement("div");n.className="dropbox-chooser";o.style.display="none";if(!Dropbox.isBrowserSupported()){n.className+=" dropbox-chooser-disabled"}Dropbox.addListener(n,"click",function(p){var q;Dropbox.choose({success:function(s){var t,r;r=(function(){var w,v,u;u=[];for(w=0,v=s.length;w<v;w++){t=s[w];u.push(t.link)}return u})();o.value=r.join(", ");o.files=s;b(o,"DbxChooserSuccess",{files:s});n.className="dropbox-chooser dropbox-chooser-used"},cancel:function(){b(o,"DbxChooserCancel")},linkType:o.getAttribute("data-link-type")||"preview",multiselect:((q=o.getAttribute("data-multiselect"))==="True"||q==="true"||q==="1")||false,extensions:o.getAttribute("data-extensions")||"",_trigger:"button"})});o.parentNode.insertBefore(n,o)})(j)}}m=document.getElementsByTagName("a");for(k=0,h=m.length;k<h;k++){j=m[k];if(__indexOf.call((j.getAttribute("class")||"").split(" "),"dropbox-saver")>=0){(function(n){n.innerHTML='<img src="'+Dropbox.baseUrl+'/static/images/widgets/dropins-logo.png"/> Save to Dropbox';Dropbox.addListener(n,"click",function(o){var p,q;o.preventDefault();p=n.getAttribute("data-filename");q=n.getAttribute("data-url");Dropbox.save({files:[{filename:p,url:q}],success:function(){b(n,"DbxSaverSuccess")},progress:function(r){b(n,"DbxSaverProgress",{progress:r})},cancel:function(){b(n,"DbxSaverCancel")}})})})(j)}}};if(document.readyState==="complete"){setTimeout(a,0)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false)}else{document.attachEvent("onreadystatechange",a)}}})();